@model CapstoneProject_Autolavaggi.Models.Auth.ProfiloViewModel

@{
    ViewData["Title"] = "Profilo Utente";
}

<h2>Profilo Utente</h2>

<form asp-action="Profilo" method="post">
    <div class="form-group">
        <label asp-for="Nome"></label>
        <input asp-for="Nome" class="form-control" />
        <span asp-validation-for="Nome" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="Email"></label>
        <input asp-for="Email" class="form-control" />
        <span asp-validation-for="Email" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="NumeroTelefono"></label>
        <input asp-for="NumeroTelefono" class="form-control" />
        <span asp-validation-for="NumeroTelefono" class="text-danger"></span>
    </div>

    <input type="submit" value="Salva Modifiche" class="btn btn-primary" />

    @if (ViewBag.Message != null)
    {
        <div class="alert alert-success mt-3">@ViewBag.Message</div>
    }
</form>

<hr />

<h3>Le mie Recensioni</h3>
@if (Model.Recensioni != null && Model.Recensioni.Any())
{
    <ul class="list-group">
        @foreach (var recensione in Model.Recensioni)
        {
            <li class="list-group-item">
                <strong>@recensione.Titolo</strong><br />
                @recensione.Commento<br />
                Voto: @recensione.Voto Stelle<br />
                Data: @recensione.Data.ToString("dd/MM/yyyy")<br />
                @if (recensione.Autolavaggio != null)
                {
                    <strong>Autolavaggio: @recensione.Autolavaggio.Nome</strong>
                }
                else
                {
                    <p>Autolavaggio non disponibile</p>
                }
            </li>
        }
    </ul>
}
else
{
    <p>Non hai recensioni.</p>
}

<hr />

<h3>Le mie Prenotazioni</h3>
@if (Model.Prenotazioni != null && Model.Prenotazioni.Any())
{
    <ul class="list-group">
        @foreach (var prenotazione in Model.Prenotazioni)
        {
            <li class="list-group-item">
                <strong>Autolavaggio: @prenotazione.Autolavaggio.Nome</strong>
                <p>Data Prenotazione: @prenotazione.Data.ToString("dd/MM/yyyy")</p>
                <p>Dettagli: @prenotazione.Servizio.Nome</p>
            </li>
        }
    </ul>
}
else
{
    <p>Non hai prenotazioni.</p>
}

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}
